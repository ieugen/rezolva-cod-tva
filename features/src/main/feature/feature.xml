<?xml version="1.0" encoding="UTF-8"?>
<features name="${project.artifactId}-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

    <repository>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</repository>

    <feature name="jax-rs-connector" version="${jax-rs-publisher.version}">
        <bundle dependency="true">mvn:com.eclipsesource.jaxrs/jersey-all/${jax-rs-jersey-all.version}</bundle>
        <bundle dependency="true">mvn:com.eclipsesource.jaxrs/consumer/${jax-rs-consumer.version}</bundle>
        <bundle>mvn:com.eclipsesource.jaxrs/publisher/${jax-rs-publisher.version}</bundle>
    </feature>

    <feature name="jax-rs-provider-moxy" version="${jax-rs-providers.version}">
        <bundle dependency="true">mvn:org.eclipse.persistence/org.eclipse.persistence.core/2.5.2</bundle>
        <bundle dependency="true">mvn:org.eclipse.persistence/org.eclipse.persistence.moxy/2.5.2</bundle>
        <bundle>mvn:com.eclipsesource.jaxrs/provider-moxy/${jax-rs-providers.version}</bundle>
    </feature>

    <feature name="jax-rs-provider-gson" version="${jax-rs-providers.version}">
        <bundle dependency="true">mvn:com.google.code.gson/gson/2.3</bundle>
        <bundle>mvn:com.eclipsesource.jaxrs/provider-gson/${jax-rs-providers.version}</bundle>
    </feature>

    <feature name="jax-rs-provider-multipart" version="${jax-rs-providers.version}">
        <bundle>mvn:com.eclipsesource.jaxrs/provider-multipart/${jax-rs-providers.version}</bundle>
    </feature>

    <feature name="jax-rs-provider-security" version="${jax-rs-providers.version}">
        <bundle>mvn:com.eclipsesource.jaxrs/provider-security/${jax-rs-providers.version}</bundle>
    </feature>

    <feature name="jax-rs-provider-sse" version="${jax-rs-providers.version}">
        <bundle>mvn:com.eclipsesource.jaxrs/provider-sse/${jax-rs-providers.version}</bundle>
    </feature>

    <feature name="http" description="Implementation of the OSGI HTTP Service" version="4.0.99">
        <feature version="4.0.99">pax-http</feature>
        <bundle start-level="30">mvn:org.apache.karaf.http/org.apache.karaf.http.core/4.0.0.M1</bundle>
    </feature>

    <feature name="pax-http" version="4.0.99" description="Implementation of the OSGI HTTP Service">
        <details>Allows to publish servlets using pax web and jetty</details>
        <configfile finalname="/etc/jetty.xml">mvn:org.ops4j.pax.web/pax-web-features/4.0.0/xml/jettyconfig</configfile>
        <config name="org.ops4j.pax.web">
            javax.servlet.context.tempdir=${karaf.data}/pax-web-jsp
            org.ops4j.pax.web.config.file=${karaf.base}/etc/jetty.xml
        </config>
        <feature version="[7.0,10.0)">pax-jetty</feature>

        <bundle dependency="true" start-level="20">mvn:org.ow2.asm/asm-all/5.0.2</bundle>
        <bundle dependency="true" start-level="20">mvn:org.apache.xbean/xbean-bundleutils/3.18</bundle>
        <bundle dependency="true" start-level="20">mvn:org.apache.xbean/xbean-reflect/3.18</bundle>
        <bundle dependency="true" start-level="20">mvn:org.apache.xbean/xbean-finder/3.18</bundle>

        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-api/4.0.0</bundle>
        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-spi/4.0.0</bundle>
        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-runtime/4.0.0</bundle>
        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-jetty/4.0.0</bundle>
    </feature>

    <feature name="webconsole" description="Base support of the Karaf WebConsole" version="4.0.99">
        <config name="org.apache.karaf.webconsole" append="false">
            realm=karaf
        </config>
        <feature version="4.0.99">http</feature>
        <feature prerequisite="false" dependency="false">aries-blueprint</feature>
        <bundle start-level="30">mvn:org.apache.felix/org.apache.felix.metatype/1.0.10</bundle>
        <bundle start-level="30">mvn:org.apache.karaf.webconsole/org.apache.karaf.webconsole.console/4.0.0.M1</bundle>
        <bundle start-level="30">mvn:org.apache.karaf.webconsole/org.apache.karaf.webconsole.features/4.0.0.M1</bundle>
        <bundle start-level="30">mvn:org.apache.karaf.webconsole/org.apache.karaf.webconsole.gogo/4.0.0.M1</bundle>
        <bundle start-level="30">mvn:org.apache.karaf.webconsole/org.apache.karaf.webconsole.http/4.0.0.M1</bundle>
        <conditional>
            <condition>eventadmin</condition>
            <bundle start-level="30">mvn:org.apache.felix/org.apache.felix.webconsole.plugins.event/1.1.0</bundle>
        </conditional>
        <conditional>
            <condition>scr</condition>
            <bundle start-level="30">mvn:org.apache.felix/org.apache.felix.webconsole.plugins.ds/1.0.0</bundle>
        </conditional>
        <conditional>
            <condition>instance</condition>
            <bundle start-level="30">mvn:org.apache.karaf.webconsole/org.apache.karaf.webconsole.instance/4.0.0.M1
            </bundle>
        </conditional>
    </feature>

    <feature name="pax-http-whiteboard" description="Provide HTTP Whiteboard pattern support" version="4.0.99">
        <feature version="4.0.99">pax-http</feature>
        <bundle dependency="true" start-level="30">mvn:org.eclipse.jdt.core.compiler/ecj/4.4</bundle>
        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-jsp/4.0.0</bundle>
        <bundle start-level="30">mvn:org.ops4j.pax.web/pax-web-extender-whiteboard/4.0.0</bundle>
    </feature>

    <feature name='rezolva-tva' version='${project.version}' start-level="80">
        <feature>scr</feature>
        <feature>eventadmin</feature>
        <feature version="4.0.99">pax-http</feature>
        <feature version="4.0.99">http</feature>
        <feature version="4.0.99">webconsole</feature>
        <feature version="4.0.99">pax-http-whiteboard</feature>

        <feature>camel-core</feature>
        <feature>camel-bindy</feature>

        <feature>jax-rs-connector</feature>
        <feature>jax-rs-provider-moxy</feature>

        <bundle>mvn:ro.ieugen.tva/api/${project.version}</bundle>
        <bundle>mvn:ro.ieugen.tva/eu-vat/${project.version}</bundle>
        <bundle>mvn:ro.ieugen.tva/tva-camel/${project.version}</bundle>
        <bundle>mvn:ro.ieugen.tva/web-service/${project.version}</bundle>
        <bundle>mvn:ro.ieugen.tva/web-app/${project.version}</bundle>

        <bundle dependency="true">mvn:org.apache.camel/camel-core-osgi/${camel.version}</bundle>

        <bundle dependency="true">mvn:javax.mail/javax.mail-api/${javax.mail.version}</bundle>
        <bundle dependency="true">mvn:com.sun.mail/javax.mail/${javax.mail.version}</bundle>


        <feature version="3.0.99">cxf-specs</feature>

        <bundle dependency="true">mvn:org.apache.cxf/cxf-core/3.0.2</bundle>
        <bundle dependency="true">mvn:org.apache.ws.xmlschema/xmlschema-core/2.1.0</bundle>
        <bundle dependency="true">mvn:org.apache.cxf/cxf-rt-frontend-simple/3.0.2</bundle>
        <bundle dependency="true">mvn:org.apache.cxf/cxf-rt-frontend-jaxws/3.0.2</bundle>
    </feature>

    <feature name="cxf-specs" version="3.0.99" >
        <bundle start-level="9">mvn:org.apache.geronimo.specs/geronimo-osgi-registry/1.1</bundle>
        <bundle start-level="10" dependency="true">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.activation-api-1.1/2.4.0</bundle>
        <bundle start-level="10">mvn:javax.annotation/javax.annotation-api/1.2</bundle>
        <bundle start-level="10" dependency="true">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.stax-api-1.0/2.4.0</bundle>
        <bundle start-level="10" dependency="true">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jaxb-api-2.2/2.4.0</bundle>
        <bundle start-level="10" dependency="true">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jaxws-api-2.2/2.4.0</bundle>
        <bundle start-level="10" dependency="true">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.saaj-api-1.3/2.4.0</bundle>
        <bundle start-level="10">mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jsr339-api-2.0/2.4.0</bundle>
        <bundle start-level="10" dependency="true">mvn:javax.mail/mail/1.4.4</bundle>
        <bundle start-level="20">mvn:org.codehaus.woodstox/stax2-api/3.1.4</bundle>
        <bundle start-level="20">mvn:org.codehaus.woodstox/woodstox-core-asl/4.4.1</bundle>
        <bundle start-level="20">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-impl/2.2.1.1_2</bundle>
        <bundle start-level="20">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-xjc/2.2.1.1_2</bundle>
    </feature>
    
    <feature name="cxf-jaxb" version="3.0.99">
        <feature version="3.0.99">cxf-specs</feature>
        <bundle start-level="20">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-impl/2.2.1.1_2</bundle>
        <bundle start-level="20">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-xjc/2.2.1.1_2</bundle>
    </feature>

    <feature name="cxf-wsdl" version="3.0.99">
        <bundle start-level="30" dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.wsdl4j/1.6.3_1</bundle>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-wsdl/3.0.2</bundle>
    </feature>
    <feature name="cxf-ws-policy" version="3.0.99">
        <feature version="3.0.99">cxf-wsdl</feature>
        <bundle start-level="30" dependency="true">mvn:org.apache.neethi/neethi/3.0.3</bundle>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-ws-policy/3.0.2</bundle>
    </feature>

    <feature name="cxf-bindings-soap" version="3.0.99">
        <feature version="3.0.99">cxf-wsdl</feature>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-bindings-xml/3.0.2</bundle>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-bindings-soap/3.0.2</bundle>
    </feature>
    <feature name="cxf-jaxws" version="3.0.99">
        <feature version="3.0.99">cxf-wsdl</feature>
        <feature version="3.0.99">cxf-databinding-jaxb</feature>
        <feature version="3.0.99">cxf-bindings-soap</feature>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-frontend-simple/3.0.2</bundle>
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-frontend-jaxws/3.0.2</bundle>
    </feature>

    <feature name="cxf-databinding-jaxb" version="3.0.99">
        <bundle start-level="40">mvn:org.apache.cxf/cxf-rt-databinding-jaxb/3.0.2</bundle>
    </feature>

</features>